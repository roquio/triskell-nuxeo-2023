<?xml version="1.0"?>
<component name="io.roqu.workspaces.membermanagement.schema" version="1.0">

    <require>org.nuxeo.ecm.core.schema.TypeService</require>
    <require>org.nuxeo.ecm.directory.types</require>

    <extension target="org.nuxeo.ecm.directory.sql.SQLDirectoryFactory"
               point="directories">

        <directory name="user2workspace">
            <schema>user2workspace</schema>
            <dataSource>java:/nxsqldirectory</dataSource>
            <table>user2workspace</table>
            <idField>id</idField>
            <autoincrementIdField>true</autoincrementIdField>
            <createTablePolicy>on_missing_columns</createTablePolicy>
            <dataLoadingPolicy>never_load</dataLoadingPolicy>
        </directory>
    </extension>

    <extension target="org.nuxeo.ecm.core.schema.TypeService" point="schema">
        <schema name="user" src="schema/workspace-user.xsd" override="true"/>
        <schema name="group" src="schema/workspace-group.xsd" override="true"/>
        <schema name="user2workspace" src="schema/user2workspace.xsd" />
    </extension>
</component>
